# Gateway
GATEWAY_HTTP_ADDR=:8080
GATEWAY_AUTH_ENABLED=true
GATEWAY_JWT_SECRET=change-me-staging
GATEWAY_GRPC_USER_ADDR=user:50054
INTERNAL_AUTH_TOKEN=change-me-staging
GATEWAY_RATE_LIMIT_DRIVER_LOCATION_REQUESTS=300
GATEWAY_RATE_LIMIT_DRIVER_LOCATION_WINDOW_SECONDS=60
GATEWAY_RATE_LIMIT_OFFER_REQUESTS=30
GATEWAY_RATE_LIMIT_OFFER_WINDOW_SECONDS=60

# Ride
RIDE_GRPC_ADDR=:50051
RIDE_POSTGRES_DSN=postgres://ride:ride@postgres:5432/rides?sslmode=disable
RIDE_NATS_URL=nats://nats:4222
RIDE_NATS_SELF_HEAL=true
RIDE_OUTBOX_ENABLED=true
RIDE_GRPC_USER_ADDR=user:50054
RIDE_GRPC_USER_REQUEST_TIMEOUT_SECONDS=2
RIDE_GRPC_USER_RETRY_MAX=1
RIDE_GRPC_USER_RETRY_BACKOFF_MS=100
RIDE_CIRCUIT_BREAKER_USER_ENABLED=true
RIDE_CIRCUIT_BREAKER_USER_MAX_REQUESTS=5
RIDE_CIRCUIT_BREAKER_USER_INTERVAL_SECONDS=30
RIDE_CIRCUIT_BREAKER_USER_TIMEOUT_SECONDS=10
RIDE_CIRCUIT_BREAKER_USER_FAILURE_RATIO=0.5
RIDE_CIRCUIT_BREAKER_USER_MIN_REQUESTS=20

# Location
LOCATION_GRPC_ADDR=:50053
LOCATION_REDIS_ADDR=redis:6379
LOCATION_NATS_URL=nats://nats:4222
LOCATION_NATS_SELF_HEAL=true
LOCATION_EVENTS_ENABLED=true

# Matching
MATCHING_GRPC_ADDR=:50052
MATCHING_REDIS_ADDR=redis:6379
MATCHING_NATS_URL=nats://nats:4222
MATCHING_NATS_SELF_HEAL=true
MATCHING_EVENTS_ENABLED=true
MATCHING_RIDE_ADDR=ride:50051
MATCHING_OFFER_TTL_SECONDS=12
MATCHING_CANDIDATE_TTL_SECONDS=30
MATCHING_ACTIVE_OFFER_TTL_SECONDS=12
MATCHING_COOLDOWN_SECONDS=20
MATCHING_LOCK_TTL_SECONDS=15
MATCHING_RADIUS_STEP_METERS=1000
MATCHING_RADIUS_MAX_METERS=5000
MATCHING_MAX_OFFERS=5
MATCHING_AVG_SPEED_KMH=24
MATCHING_ETA_JITTER_MS=200

# Notify
NOTIFY_HTTP_ADDR=:8090
NOTIFY_NATS_URL=nats://nats:4222
NOTIFY_NATS_SELF_HEAL=true
NOTIFY_EVENTS_ENABLED=true
NOTIFY_EVENTS_RIDE_SUBJECT=ride.>
NOTIFY_EVENTS_DRIVER_SUBJECT=driver.>

# User
USER_HTTP_ADDR=:8081
USER_GRPC_ADDR=:50054
USER_POSTGRES_DSN=postgres://ride:ride@postgres:5432/users?sslmode=disable
USER_REDIS_ADDR=redis:6379
USER_REDIS_PASSWORD=
USER_REDIS_DB=0
USER_AUTH_ISSUER=ride-hailing
USER_AUTH_AUDIENCE=ride-hailing-clients
USER_INTERNAL_AUTH_ENABLED=true

# Postgres
POSTGRES_USER=ride
POSTGRES_PASSWORD=ride
POSTGRES_DB=rides

# Goose
RIDE_GOOSE_DBSTRING=postgresql://ride:ride@postgres:5432/rides?sslmode=disable
USER_GOOSE_DBSTRING=postgresql://ride:ride@postgres:5432/users?sslmode=disable

# Observability
OTEL_EXPORTER_OTLP_ENDPOINT=otel-collector:4317
